    Author: William Fank Thom√© <will(at)iamtho(dot)me>
    Status: Draft
    Type: Standards Track
    Created: 02-Mar-2025
    Erlang-Version: OTP-28.0
    Post-History:
        https://erlangforums.com/t/proposal-string-interpolation-for-triple-quoted-strings-via-the-f-sigil/4551
        https://github.com/erlang/otp/pull/9512
****
EEP 79: `f` Sigil for String Interpolation
----

Abstract
========

This EEP proposes introducing the `f` sigil (`~f`) for string interpolation, allowing embedded
Erlang expressions within triple-quoted and single-line strings. This enhances readability and
reduces boilerplate when constructing dynamic strings.

Rationale
=========

Constructing strings with dynamic values in Erlang often requires manual concatenation of
binaries or lists, leading to error-prone and verbose code. For example:

    Title = get_title(),
    Html = <<"<div>", Title/binary, "</div>">>.

The `f` sigil simplifies this by embedding expressions directly into strings:

    Title = get_title(),
    Html = ~f"<div>{Title}</div>".

Key Benefits
============

- **Readability**: Structure mirrors output, reducing cognitive load.
- **Efficiency**: Avoids intermediate allocations via direct binary/iolist generation.
- **Safety**: Enforces binary-only interpolation, reducing runtime errors.

Design
======

Syntax
------

  - `~f"..."`: Returns a flattened **binary**.
  - `~fs"..."`: Returns an **iolist** (list of binaries/strings).

Features
--------

  - **Expressions**: Embed Erlang expressions within `{}`.
  - **Triple-Quoted Support**: Preserves indentation and newlines.
  - **Escaping**: Use `\{` for literal `{`.

Examples
--------

Binary Interpolation (`~f`)

    ~f"User: {Name}, Age: {integer_to_binary(Age)}"

IOList Interpolation (`~fs`)

    ~fs"User: {Name}, Age: {integer_to_binary(Age)}"

Multi-Line

    ~f"""
    <html>
      <body>{Content}</body>
    </html>
    """

Backwards compatibility
========================

Existing code is unaffected.

Reference Implementation
========================

[PR #9512](https://github.com/erlang/otp/pull/9512)

Copyright
=========

This document is placed in the public domain or under the CC0-1.0-Universal
license, whichever is more permissive.
